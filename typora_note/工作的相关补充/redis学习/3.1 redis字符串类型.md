# Redis字符串类型

字符串类型是 Redis 中最基本的数据类型，它能存储任何形式的字符串，包括二进制数据，序列化后的数据，JSON 化的对象甚至是一张图片。

## 基本命令

先测试能连接到 redis 服务器

![img](3.1 redis字符串类型.assets/1560684536@7ca0e5800e25583247c064467c363eb7.png)

**A、set**

将字符串值 value 设置到 key（所有的key都是string类型的） 中

语法：set key value

![img](3.1 redis字符串类型.assets/1560684561@a61ec3d8dbed040d98620f271f45fb83.png)

查看已经插入的 key

![img](3.1 redis字符串类型.assets/1560684579@bb524bf68b402e1fce1d154d03cf9988.png)

向已经存在的 key 设置新的 value，会覆盖原来的值

![img](3.1 redis字符串类型.assets/1560684694@1010a6d3e7e4321e09344ae2a8ad19d9.png)

**B、 get**

获取 key 中设置的字符串值语法： get key

例如：获取 username 这个 key 对应的 value

![img](3.1 redis字符串类型.assets/1560684756@877b20e1288acd27c7608c5f58bb72a7.png)

**C、 incr**

将 key 中储存的数字值加 1，如果 key 不存在，则 key 的值先被初始化为 0 再执行incr 操作（只能对数字类型的数据操作） 语法：incr key

例 1：操作key,值增加 1

![img](3.1 redis字符串类型.assets/1560684800@0effa80270aef1e72cc5ccb764ddb8a5.png)

例 2：对非数字的值操作是不行的

![img](3.1 redis字符串类型.assets/1560684844@4a2f7e1eba20ffad74079e88c67eba8c.png)

**D、 decr**

将 key 中储存的数字值减1，如果 key 不存在，则么 key 的值先被初始化为 0 再执行 decr 操作（只能对数字类型的数据操作）

语法：decr key

例1：不存在的key，初值为0，再减 1 

![img](3.1 redis字符串类型.assets/1560684880@3c2db13e9455e738c22928004673e19c.png)

例2：对存在的数字值的 key ，减 1 。先执行 incr index ,增加到 3

![img](3.1 redis字符串类型.assets/1560685097@15e4d410c270fddb0f9e508b97b2659f.png)

incr ，decr 在实现关注人数上，文章的点击数上。

**E 、key**

语法：append key value

说明：如果 key 存在， 则将 value 追加到 key 原来旧值的末尾如果 key 不存在， 则将 key 设置值为 value

返回值：追加字符串之后的总长度

例 1：追加内容到存在的 key

![img](3.1 redis字符串类型.assets/1560685293@85ad52490f392772f6893c1d77b4c6e4.png)

例 2：追加到不存在的 key，同 set key value

![img](3.1 redis字符串类型.assets/1560685410@cf835576491a490573a84a6e17756612.png)

## 常用命令

**A 、 strlen**

语法：strlen key

说明：返回 key 所储存的字符串值的长度返回值： 

 ①：如果key存在，返回字符串值的长度

 ②：key不存在，返回0 

例 1：计算存在 key 的字符串长度

![img](3.1 redis字符串类型.assets/1560685614@00622e3270460c01177d69088b997148.png)

设置中文 set k4 中文长度 ， 按字符个数计算

![img](3.1 redis字符串类型.assets/1560685742@5da65c95d2661fb5c77656828f383aa9.png)

**B、 getrange**

语法：getrange key start end

作用：获取 key 中字符串值从 start 开始 到 end 结束 的子字符串,包括 start 和 end, 负数表示从字符串的末尾开始， -1 表示最后一个字符

返回值：截取的子字符串

使用的字符串 key: school, value: bjpowernode

例 1: 截取从 2 到 5 的字符

![img](3.1 redis字符串类型.assets/1560688322@4fb326d4760a129b97785dc310fa1ab4.png)

例 2：从字符串尾部截取，start ,end 是负数，最后一位是 -1

![img](3.1 redis字符串类型.assets/1560688368@0d7b72efc71c5535dde604b5876d5f96.png)

例 3：超出字符串范围的截取 ，获取合理的子串

![img](3.1 redis字符串类型.assets/1560688421@b1998077cf560b57153e50049a31188a.png)

**C、 setrange**

语法：setrange key offset value

说明：用 value 覆盖（替换）key 的存储的值从 offset 开始,不存在的 key 做空白字符串。

返回值：修改后的字符串的长度

例 1：替换给定的字符串

![img](3.1 redis字符串类型.assets/1560688503@149ac473721b2e56967a888ccc24f88d.png)

例 2：设置不存在的 key

![img](3.1 redis字符串类型.assets/1560688554@bc5f2b0437f732c2049a8374357cb5e9.png)

**D、mset**

语法：mset key value [key value…]

说明：同时设置一个或多个 key-value 对返回值： OK

例 1：一次设置多个 key， value

![img](3.1 redis字符串类型.assets/1560688613@dde615afaac855080682d8a510c19e22.png)

**E、 mget**

语法：mget key [key …]

作用：获取所有(一个或多个)给定 key 的值返回值：包含所有 key 的列表

例 1：返回多个 key 的存储值

![img](3.1 redis字符串类型.assets/1560688665@49fc4286734d8ef9d847026925443345.png)

例 2：返回不存在的

![img](3.1 redis字符串类型.assets/1560688697@f6f55851cd4f8684b1a4a11a8cfaf504.png)

应用场景：

##### 商品编号、订单号采用INCR命令生成。【INCR数值增减】

##### 对1号产品点赞+1

微信公众号的点赞

