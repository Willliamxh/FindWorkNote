# 1.总体概述：

比方说b b+ 红黑树首先都是搜索树，

https://zhuanlan.zhihu.com/p/335036067

但是b b+ 是多叉的，红黑树是二叉的，b 树的每一个节点本身都是数据、b+树要到叶子才行，
b+的叶子结点有串成了一个链表，
红黑树的颜色规则什么的，

**红黑树的特性**:
**（1）每个节点或者是黑色，或者是红色。**
**（2）根节点是黑色。**
**（3）每个叶子节点（NIL）是黑色。 [注意：这里叶子节点，是指为空(NIL或NULL)的叶子节点！]**
**（4）如果一个节点是红色的，则它的子节点必须是黑色的。**
**（5）从一个节点到该节点的子孙节点的所有路径上包含相同数目的黑节点。**

b树适合文件索引，因为IO次数少，
b+适合数据库索引，不仅IO次数少而且可以一次get多个数据，
红黑树用在hashmap、treemap



## b树：适合做文件索引 为什么？（换个问题 为什么不能退化成链表？）

**文件系统和数据库的索引都是存在硬盘上的，并且如果数据量大的话，不一定能一次性加载到内存中**。那这个时候 就用b树多路存储的性质，每次加载b树的一个节点 然后一步步往下找。

如果在内存中，红黑树比b树效率更高，但是涉及磁盘操作的话，b树更优。



## b+树：数据库索引

B+树是在B树的基础上进行改造，它的**数据都在叶子结点**，同时叶子结点之间还加了指针形成链表。

<img src="b树b+树.assets/image-20210310161505749.png" alt="image-20210310161505749" style="zoom:33%;" />

为什么用b+树：数据库中 Select 数据，不一定只选一条，很多时候会选多条，比如按照 ID 排序后选 10 条。

如果是多条的话，B 树需要做局部的中序遍历，可能要跨层访问。

而 B+ 树由于所有数据都在叶子结点，不用跨层，同时由于有链表结构，只需要找到首尾，通过链表就能把所有数据取出来了。



问题：既然hash比b+更快 为什么 mysql还用b+来做索引呢？

这和业务场景有关。如果只选一个数据，那确实是 Hash 更快。但是数据库中经常会选择多条，这时候由于 B+ 树索引有序，并且又有链表相连，它的查询效率比 Hash 就快很多了。而且数据库中的索引一般是在磁盘上，数据量大的情况可能无法一次装入内存，B+ 树的设计可以允许数据分批加载，同时树的高度较低，提高查找效率。







